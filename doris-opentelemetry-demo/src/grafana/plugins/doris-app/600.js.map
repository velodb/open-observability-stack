{"version":3,"file":"600.js?_cache=f94e28dabcb4a2a73d19","mappings":"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","sources":["webpack://doris-app/./components/trace-detail/index.tsx","webpack://doris-app/../node_modules/lucide-react/dist/esm/shared/src/utils.js","webpack://doris-app/../node_modules/lucide-react/dist/esm/defaultAttributes.js","webpack://doris-app/../node_modules/lucide-react/dist/esm/Icon.js","webpack://doris-app/../node_modules/lucide-react/dist/esm/createLucideIcon.js","webpack://doris-app/../node_modules/lucide-react/dist/esm/icons/circle-help.js","webpack://doris-app/./components/traces/search-sidebar/index.tsx","webpack://doris-app/./components/traces/traces-viewer/trace-item.tsx","webpack://doris-app/./components/traces/traces-viewer/index.tsx","webpack://doris-app/./components/traces/traces-header/discover-header.style.ts","webpack://doris-app/./components/traces/traces-header/index.tsx","webpack://doris-app/./pages/PageTrace.tsx","webpack://doris-app/./services/traces.sql.ts","webpack://doris-app/./services/traces.ts","webpack://doris-app/./store/traces.ts"],"sourcesContent":["import { LoadingState } from '@grafana/data';\nimport { PanelRenderer } from '@grafana/runtime';\nimport { Drawer, LoadingPlaceholder } from '@grafana/ui';\nimport { useAtom, useAtomValue } from 'jotai';\nimport React, { useEffect } from 'react';\nimport { getTableDataTraceService } from 'services/traces';\nimport { currentCatalogAtom, currentDatabaseAtom, tableTracesDataAtom, selectedDatasourceAtom, selectedRowAtom } from 'store/discover';\nimport { currentTraceTableAtom } from 'store/traces';\nimport { formatTracesResData } from 'utils/data';\n\nexport default function TraceDetail(props: { onClose?: () => void; open: boolean; traceId?: string; traceTable?: string }) {\n    const currentTable = useAtomValue(currentTraceTableAtom);\n    const currentCatalog = useAtomValue(currentCatalogAtom);\n    const currentDatabase = useAtomValue(currentDatabaseAtom);\n    const [traceData, setTraceData] = useAtom(tableTracesDataAtom);\n    const selectedRow = useAtomValue(selectedRowAtom);\n    const selectdbDS = useAtomValue(selectedDatasourceAtom);\n    const traceTable = props?.traceTable || currentTable || 'otel_traces';\n    const [loading, setLoading] = React.useState(false);\n\n    const { open, traceId } = props;\n\n    const getTraceData = React.useCallback(() => {\n        let payload: any = {\n            catalog: currentCatalog,\n            database: currentDatabase,\n            table: traceTable,\n            cluster: '',\n            sort: 'DESC',\n            trace_id: traceId || '',\n        };\n        setLoading(true);\n\n        getTableDataTraceService({\n            selectdbDS,\n            ...payload,\n        }).subscribe({\n            next: ({ data, ok }: any) => {\n                setLoading(false);\n                if (ok) {\n                    const formatedData = formatTracesResData(data.results.getTableDataTrace.frames[0]);\n                    setTraceData(formatedData);\n                }\n            },\n            error: (err: any) => {\n                setLoading(false);\n                console.log('Fetch Error', err);\n            },\n        });\n    }, [currentCatalog, currentDatabase, traceTable, selectdbDS, setTraceData, traceId]);\n\n    useEffect(() => {\n        if (traceId) {\n            getTraceData();\n        }\n    }, [selectedRow.trace_id, currentCatalog, currentDatabase, selectdbDS, setTraceData, getTraceData, traceId]);\n\n    function renderTracePanel() {\n        if (traceData) {\n            return (\n                <PanelRenderer\n                    title=\"trace panel\"\n                    width={200}\n                    height={300}\n                    pluginId=\"traces\"\n                    options={{}}\n                    data={{\n                        state: loading ? LoadingState.Loading : LoadingState.Done,\n                        series: [traceData],\n                        timeRange: {\n                            from: new Date(Date.now() - 15 * 60 * 1000) as any, // 15 分钟前\n                            to: new Date() as any,\n                            raw: {\n                                from: 'now-15m',\n                                to: 'now',\n                            },\n                        },\n                    }}\n                />\n            );\n        }\n        return null;\n    }\n\n    return (\n        <>\n            {open && (\n                <Drawer\n                    title=\"Trace Panel\"\n                    onClose={() => {\n                        props?.onClose?.();\n                    }}\n                    size=\"lg\"\n                >\n                    {loading ? <LoadingPlaceholder text={`Loading`} /> : renderTracePanel()}\n                </Drawer>\n            )}\n        </>\n    );\n}\n","/**\n * @license lucide-react v0.513.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase();\nconst toCamelCase = (string) => string.replace(\n  /^([A-Z])|[\\s-_]+(\\w)/g,\n  (match, p1, p2) => p2 ? p2.toUpperCase() : p1.toLowerCase()\n);\nconst toPascalCase = (string) => {\n  const camelCase = toCamelCase(string);\n  return camelCase.charAt(0).toUpperCase() + camelCase.slice(1);\n};\nconst mergeClasses = (...classes) => classes.filter((className, index, array) => {\n  return Boolean(className) && className.trim() !== \"\" && array.indexOf(className) === index;\n}).join(\" \").trim();\nconst hasA11yProp = (props) => {\n  for (const prop in props) {\n    if (prop.startsWith(\"aria-\") || prop === \"role\" || prop === \"title\") {\n      return true;\n    }\n  }\n};\n\nexport { hasA11yProp, mergeClasses, toCamelCase, toKebabCase, toPascalCase };\n//# sourceMappingURL=utils.js.map\n","/**\n * @license lucide-react v0.513.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-react v0.513.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.js';\nimport { mergeClasses, hasA11yProp } from './shared/src/utils.js';\n\nconst Icon = forwardRef(\n  ({\n    color = \"currentColor\",\n    size = 24,\n    strokeWidth = 2,\n    absoluteStrokeWidth,\n    className = \"\",\n    children,\n    iconNode,\n    ...rest\n  }, ref) => createElement(\n    \"svg\",\n    {\n      ref,\n      ...defaultAttributes,\n      width: size,\n      height: size,\n      stroke: color,\n      strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n      className: mergeClasses(\"lucide\", className),\n      ...!children && !hasA11yProp(rest) && { \"aria-hidden\": \"true\" },\n      ...rest\n    },\n    [\n      ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n      ...Array.isArray(children) ? children : [children]\n    ]\n  )\n);\n\nexport { Icon as default };\n//# sourceMappingURL=Icon.js.map\n","/**\n * @license lucide-react v0.513.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport { mergeClasses, toKebabCase, toPascalCase } from './shared/src/utils.js';\nimport Icon from './Icon.js';\n\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({ className, ...props }, ref) => createElement(Icon, {\n      ref,\n      iconNode,\n      className: mergeClasses(\n        `lucide-${toKebabCase(toPascalCase(iconName))}`,\n        `lucide-${iconName}`,\n        className\n      ),\n      ...props\n    })\n  );\n  Component.displayName = toPascalCase(iconName);\n  return Component;\n};\n\nexport { createLucideIcon as default };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-react v0.513.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\", key: \"1u773s\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n];\nconst CircleHelp = createLucideIcon(\"circle-help\", __iconNode);\n\nexport { __iconNode, CircleHelp as default };\n//# sourceMappingURL=circle-help.js.map\n","'use client';\n\nimport React, { useEffect } from 'react';\nimport { HelpCircle } from 'lucide-react';\nimport { Button, Field, Input, Select } from '@grafana/ui';\nimport { useAtom, useAtomValue } from 'jotai';\nimport { Tooltip } from 'antd';\nimport { currentOperationAtom, currentServiceAtom, maxDurationAtom, minDurationAtom, tagsAtom, traceOperationsAtom, tracesServicesAtom } from 'store/traces';\nimport { css } from '@emotion/css';\nimport { currentTimeFieldAtom } from 'store/discover';\nimport { trimSpacesAroundEquals } from 'utils/utils';\n\nexport function SearchSidebar(props: {\n    onQuerying?: () => void;\n    onServiceChange?: (service: any) => void;\n    onOperationChange?: (operation: any) => void;\n    onTagsChange?: (tags: string) => void;\n    onMinDurationChange?: (minDuration: string) => void;\n    onMaxDurationChange?: (maxDuration: string) => void;\n    onLimitResultsChange?: (limit: number) => void;\n}) {\n    const tracesServices = useAtomValue(tracesServicesAtom);\n    const traceOperations = useAtomValue(traceOperationsAtom);\n    const [currentService, setCurrentService] = useAtom(currentServiceAtom);\n    const [currentOperation, setCurrentOperation] = useAtom(currentOperationAtom);\n    const [tags, setTags] = useAtom(tagsAtom);\n    const currentTimeField = useAtomValue(currentTimeFieldAtom);\n    const [minDuration, setMinDuration] = useAtom(minDurationAtom);\n    const [maxDuration, setMaxDuration] = useAtom(maxDurationAtom);\n\n    useEffect(() => {\n        setCurrentService({ value: 'all', label: 'ALL' });\n    }, [currentTimeField, setCurrentService]);\n\n    return (\n        <div className=\"space-y-6\">\n            <div className=\"space-y-4\">\n                <div>\n                    <Field label=\"Service\" style={{ marginLeft: 8 }}>\n                        <Select\n                            width={15}\n                            options={tracesServices}\n                            value={currentService}\n                            onChange={(selectedService: any) => {\n                                // Handle service change\n                                setCurrentService(selectedService);\n                                setCurrentOperation({ value: 'all', label: 'ALL' });\n                            }}\n                        ></Select>\n                    </Field>\n                </div>\n\n                <div>\n                    <Field label=\"Operation\" style={{ marginLeft: 8 }}>\n                        <Select\n                            width={15}\n                            options={traceOperations}\n                            value={currentOperation}\n                            onChange={(selectedOperation: any) => {\n                                setCurrentOperation(selectedOperation);\n                            }}\n                        ></Select>\n                    </Field>\n                </div>\n\n                <div>\n                    {/* <Label htmlFor=\"tags\" className=\"text-sm font-medium text-gray-700 flex items-center gap-1\">\n                        Tags <HelpCircle className=\"w-3 h-3 text-gray-400\" />\n                    </Label> */}\n                    <Field\n                        label={\n                            <span\n                                className={css`\n                                    display: flex;\n                                    align-items: center;\n                                `}\n                            >\n                                Tags\n                                <Tooltip title={<div>\n                                    Filter traces using <a className={css`font-weight:500px;color:#3D71D9;`} href='https://brandur.org/logfmt' target='_blank'>logfmt</a> syntax:\n                                    <br />\n                                    <ul className={css`list-style-type: disc;list-style-position: inside;`}>\n                                        <li>Equality: http.status_code=200</li>\n                                        <li>Inequality: error!=true</li>\n                                        <li>Contains: message~=\"timeout\"</li>\n                                        <li>Multiple (AND): method=POST duration&gt;1000</li>\n                                        <li>OR conditions: error=true OR status&gt;=500</li>\n                                    </ul>\n                                </div>}>\n                                    <HelpCircle\n                                        size={16}\n                                        className={css`\n                                        margin-left: 4px;\n                                    `}\n                                    />\n                                </Tooltip>\n\n                            </span>\n                        }\n                        style={{ marginLeft: 8 }}\n                    >\n                        <Input\n                            id=\"tags\"\n                            placeholder=\"http.status_code=200 error=true\"\n                            className=\"mt-1\"\n                            value={tags}\n                            onChange={e => {\n                                console.log((e.target as HTMLInputElement)?.value);\n                                const value = trimSpacesAroundEquals((e.target as HTMLInputElement)?.value);\n                                setTags(value);\n                            }}\n                        />\n                    </Field>\n                </div>\n\n                <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                        <Field label=\"Min Duration\" style={{ marginLeft: 8 }}>\n                            <Input\n                                id=\"min-duration\"\n                                placeholder=\"e.g. 1.2s, 100ms, 500us\"\n                                className=\"mt-1\"\n                                value={minDuration}\n                                onChange={e => {\n                                    setMinDuration((e.target as HTMLInputElement)?.value);\n                                    props?.onMinDurationChange?.((e.target as HTMLInputElement)?.value);\n                                }}\n                            />\n                        </Field>\n                    </div>\n                    <div>\n                        <Field label=\"Max Duration\" style={{ marginLeft: 8 }}>\n                            <Input\n                                id=\"max-duration\"\n                                placeholder=\"e.g. 1.2s, 100ms, 500us\"\n                                className=\"mt-1\"\n                                value={maxDuration}\n                                onChange={e => {\n                                    setMaxDuration((e.target as HTMLInputElement)?.value);\n                                    props?.onMaxDurationChange?.((e.target as HTMLInputElement)?.value);\n                                }}\n                            />\n                        </Field>\n                    </div>\n                </div>\n\n                <Button\n                    onClick={() => {\n                        props?.onQuerying?.();\n                    }}\n                    style={{ marginLeft: 8 }}\n                >\n                    Find Traces\n                </Button>\n            </div>\n        </div>\n    );\n}\n","import React from 'react';\nimport { useTheme2 } from '@grafana/ui';\nimport { css } from '@emotion/css';\n\ninterface Trace {\n    trace_id: string;\n    operation: string;\n    trace_duration_ms: number;\n    root_span_duration_ms: number;\n    max_span_duration_ms: number;\n    root_service: string;\n    services: string;\n    time: string;\n    error_spans: number;\n    spans: number;\n    timeAgo: string;\n    progress: number;\n}\n\ninterface TraceItemProps {\n    trace: Trace;\n    onClick?: () => void;\n}\n\nexport const TraceItem: React.FC<TraceItemProps> = ({ trace, onClick }) => {\n    const theme = useTheme2();\n\n    return (\n        <div\n            onClick={onClick}\n            className={css`\n                display: flex;\n                align-items: center;\n                background: ${theme.colors.background.primary};\n                border: 1px solid ${theme.colors.border.weak};\n                border-radius: ${theme.shape.borderRadius()};\n                padding: ${theme.spacing(1.5)};\n                position: relative;\n                overflow: hidden;\n                box-shadow: ${theme.shadows.z1};\n\n                &:hover {\n                    background-color: rgb(34, 37, 43);\n                    cursor: pointer;\n                }\n            `}\n        >\n            {/* Progress bar background */}\n            <div\n                className={css`\n                    position: absolute;\n                    left: 0;\n                    top: 0;\n                    height: 100%;\n                    width: ${trace.progress}%;\n                    background: ${theme.colors.primary.main};\n                    opacity: 0.1;\n                `}\n            />\n\n            <div\n                className={css`\n                    flex: 1;\n                    display: grid;\n                    gap: ${theme.spacing(0.5)};\n                    z-index: 10;\n                `}\n            >\n                <div\n                    className={css`\n                        display: flex;\n                        justify-content: space-between;\n                        font-weight: ${theme.typography.fontWeightMedium};\n                        color: ${theme.colors.text.primary};\n                    `}\n                >\n                    <span>\n                        {trace.root_service}:{trace.operation}{' '}\n                        <span\n                            className={css`\n                                color: ${theme.colors.text.secondary};\n                            `}\n                        >\n                            {trace.trace_id}\n                        </span>\n                    </span>\n                    <span>{trace.trace_duration_ms} ms</span>\n                </div>\n\n                <div\n                    className={css`\n                        display: flex;\n                        justify-content: space-between;\n                        font-size: ${theme.typography.size.sm};\n                        color: ${theme.colors.text.secondary};\n                    `}\n                >\n                    <div\n                        className={css`\n                            display: flex;\n                            align-items: center;\n                            gap: ${theme.spacing(1)};\n                        `}\n                    >\n                        <span>{trace.spans} Spans</span>\n                        <div\n                            className={css`\n                                display: flex;\n                                gap: ${theme.spacing(0.5)};\n                            `}\n                        >\n                            {JSON.parse(trace.services).map((service: any, index: number) => (\n                                <span\n                                    key={index}\n                                    className={css`\n                                        padding: 2px 6px;\n                                        border-radius: 9999px;\n                                        font-size: ${theme.typography.size.xs};\n                                        color: ${theme.colors.text.secondary};\n                                    `}\n                                >\n                                    {service}\n                                </span>\n                            ))}\n                        </div>\n                    </div>\n                    <div\n                        className={css`\n                            text-align: right;\n                        `}\n                    >\n                        <div>{trace.time}</div>\n                        <div\n                            className={css`\n                                font-size: ${theme.typography.size.xs};\n                                color: ${theme.colors.text.disabled};\n                            `}\n                        >\n                            {trace.timeAgo}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n","import React, { useMemo } from 'react';\nimport { Select, useTheme2, Pagination } from '@grafana/ui';\nimport { css } from '@emotion/css';\nimport { TraceItem } from './trace-item';\nimport ReactECharts from 'echarts-for-react';\nimport { useAtom, useAtomValue } from 'jotai';\nimport { pageAtom, pageSizeAtom } from 'store/discover';\nimport { currentSortAtom } from 'store/traces';\nimport TraceDetail from 'components/trace-detail';\n\nexport const TraceView: React.FC<any> = React.memo(({ traces: propTraces, onSortByChange }) => {\n    const theme = useTheme2();\n    const [page, setPage] = useAtom(pageAtom);\n    const pageSize = useAtomValue(pageSizeAtom);\n    const total = propTraces[0]?.total || 0;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    const traces: any[] = propTraces || [];\n    const [sort, setSort] = useAtom(currentSortAtom);\n    const [drawerOpen, setDrawerOpen] = React.useState(false);\n    const [traceId, setTraceId] = React.useState<string>('');\n    \n    // 预处理 series 数据，计算 symbolSize\n    const seriesData = useMemo(() => {\n        return traces.map(s => ({\n            name: `${s.root_service}:${s.operation}`,\n            spans: s.spans,\n            value: s.trace_duration_ms,\n            trace_id: s.trace_id,\n            symbolSize: Math.max(12, Math.min(30, s.spans || 1)),\n        }));\n    }, [traces]);\n\n    const option = useMemo(() => {\n        return {\n            tooltip: {\n                trigger: 'item',\n                padding: 0,\n                borderWidth: 0,\n                backgroundColor: theme.isLight ? '#ffffff' : 'rgba(63, 63, 69, 0.64)',\n                formatter: function (params: any) {\n                    const html = `<div\n                       style=\"\n                          padding: 8px;\n                          min-width: 120px;\n                          border-radius: 6px;\n                          backdrop-filter: blur(12px);\n                          color: ${theme.isLight ? '#1F1F26' : '#EFEFF0'};\n                        \">\n                      <div style=\"padding-bottom: 4px; border-bottom: 1px solid ${theme.isLight ? '#DFDFE0' : '#3F3F45'};\">${[params.name]}</div>\n                      <div style=\"padding-top:4px;display: flex;justify-content: space-between;\"><span>Durations：</span><span style=\"font-family:DIN Alternate;font-size:14;font-weight:500;\">${[\n                          `${params.value} ms` || 'No Data',\n                      ]}</span></div>\n                      <div style=\"padding-top:4px;display: flex;justify-content: space-between;\"><span>Spans：</span><span style=\"font-family:DIN Alternate;font-size:14;font-weight:500;\">${[\n                          params.data.spans || 'No Data',\n                      ]}</span></div>\n                  </div>`;\n                    return html;\n                },\n            },\n            xAxis: {\n                type: 'category',\n                name: 'Time',\n                data: traces.map(s => s.time),\n                axisLabel: { color: theme.colors.text.primary },\n            },\n            yAxis: {\n                type: 'value',\n                name: 'Duration (ms)',\n                axisLabel: { color: theme.colors.text.primary },\n                axisLine: { lineStyle: { color: theme.colors.text.secondary } },\n            },\n            series: [\n                {\n                    type: 'scatter',\n                    data: seriesData,\n                    symbolSize: (data: any) => data.symbolSize,\n                },\n            ],\n        };\n    }, [seriesData, traces, theme]);\n\n    const onEvents = {\n        click: (params: any) => {\n            setTraceId(params.data.trace_id);\n            setDrawerOpen(true);\n        },\n    };\n\n    return (\n        <div\n            className={css`\n                display: flex;\n                flex-direction: column;\n                gap: 16px;\n                background: ${theme.colors.background.primary};\n                color: ${theme.colors.text.primary};\n            `}\n        >\n            {/* Scatter Plot */}\n            <div\n                className={css`\n                    margin-top: -20px;\n                    height: 300px;\n                `}\n            >\n                <ReactECharts option={option} notMerge={false} lazyUpdate={true} style={{ height: '100%' }} onEvents={onEvents} />\n            </div>\n\n            {/* Header */}\n            <div\n                className={css`\n                    display: flex;\n                    justify-content: space-between;\n                    align-items: center;\n                `}\n            >\n                <div\n                    className={css`\n                        display: flex;\n                        gap: 8px;\n                        align-items: center;\n                    `}\n                >\n                    <span>Sort:</span>\n                    <Select\n                        options={[\n                            { label: 'Most Recent', value: 'most-recent' },\n                            { label: 'Longest Duration', value: 'longest-duration' },\n                            { label: 'Shortest Duration', value: 'shortest-duration' },\n                            { label: 'Most Spans', value: 'most-spans' },\n                            { label: 'Least Spans', value: 'least-spans' },\n                        ]}\n                        value={sort}\n                        onChange={option => {\n                            setPage(1);\n                            setSort(option.value);\n                            onSortByChange(option.value);\n                        }}\n                    />\n                </div>\n            </div>\n\n            {/* Trace List Header */}\n            <div\n                className={css`\n                    display: flex;\n                    justify-content: space-between;\n                    align-items: center;\n                    padding-bottom: 20px;\n                `}\n            >\n                <h3\n                    className={css`\n                        display: flex;\n                        justify-content: space-between;\n                        align-items: center;\n                        gap: 8px;\n                    `}\n                >\n                    <div>{traces.length} Traces, </div>\n                    <div>Total {total}</div>\n                </h3>\n                <Pagination currentPage={page} numberOfPages={Math.ceil(total / pageSize) || 1} onNavigate={toPage => setPage(toPage)} />\n            </div>\n\n            {/* Trace List */}\n            <div\n                className={css`\n                    display: flex;\n                    flex-direction: column;\n                    gap: 8px;\n                `}\n            >\n                {traces.map(trace => (\n                    <TraceItem\n                        key={trace.id}\n                        trace={trace}\n                        onClick={() => {\n                            setTraceId(trace.trace_id);\n                            setDrawerOpen(true);\n                        }}\n                    />\n                ))}\n            </div>\n\n            <TraceDetail onClose={() => setDrawerOpen(false)} open={drawerOpen} traceId={traceId} />\n        </div>\n    );\n}) ;\n","import { css } from '@emotion/css';\nimport styled from '@emotion/styled';\n\nexport const DiscoverHeaderSearch = styled.div`\n    flex: 2;\n    display: flex;\n    border-radius: 6px;\n    align-items: center;\n    margin-right: 8px;\n    .ant-select-open {\n        .ant-select-arrow {\n            .anticon {\n                transform: rotate(-180deg);\n            }\n        }\n    }\n    .select-database {\n        width: 160px;\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n    }\n    .ant-select-single {\n        height: 30px;\n    }\n`;\n\nexport const DiscoverHeaderTimeSelect = styled.div`\n    flex: 1;\n    display: flex;\n    border-radius: 6px;\n    align-items: center;\n    margin-right: 8px;\n\n    div.trp-time-label {\n        border: 0px;\n    }\n`;\n\nexport const CascaderStyle = css`\n    width: 184px;\n    .ant-select-selector {\n        padding: 0 16px 0 40px !important;\n    }\n    .ant-select-selection-placeholder,\n    .ant-select-selection-item {\n        margin-top: 2px;\n    }\n    .ant-select-selector>.ant-select-selection-search>.ant-select-selection-search-input {\n        margin-left: 1.8rem;\n    }\n`;\n","'use client';\nimport React, { useEffect } from 'react';\nimport dayjs from 'dayjs';\nimport { DiscoverHeaderSearch } from './discover-header.style';\nimport { useAtom, useAtomValue, useSetAtom } from 'jotai';\nimport { DataSourcePicker, getDataSourceSrv } from '@grafana/runtime';\nimport { css } from '@emotion/css';\nimport {\n    indexesAtom,\n    discoverCurrentAtom,\n    locationAtom,\n    // currentClusterAtom,\n    tableFieldsAtom,\n    timeFieldsAtom,\n    currentDateAtom,\n    currentTimeFieldAtom,\n    currentIndexAtom,\n    searchFocusAtom,\n    datasourcesAtom,\n    selectedDatasourceAtom,\n    timeRangeAtom,\n    databasesAtom,\n    tablesAtom,\n    disabledOptionsAtom,\n} from 'store/discover';\nimport { isValidTimeFieldType } from 'utils/data';\nimport { Select, Field, useTheme2, TimeRangeInput } from '@grafana/ui';\nimport { FORMAT_DATE } from '../../../constants';\nimport { getDatabases, getFieldsService, getIndexesService, getTablesService } from 'services/metaservice';\nimport { currentTraceTableAtom } from 'store/traces';\nimport { toDataFrame } from '@grafana/data';\nimport { Subscription } from 'rxjs';\n\nexport default function TracesHeader() {\n    // const catalogs = useAtomValue(catalogAtom);\n    const setIndexes = useSetAtom(indexesAtom);\n    const [discoverCurrent, setDiscoverCurrent] = useAtom(discoverCurrentAtom);\n    if (process.env.NODE_ENV !== 'production') {\n        discoverCurrentAtom.debugLabel = 'current';\n    }\n    const setLoc = useSetAtom(locationAtom);\n    const setTableFields = useSetAtom(tableFieldsAtom);\n    const [timeFields, setTimeFields] = useAtom(timeFieldsAtom);\n    const [_currentDate, setCurrentDate] = useAtom(currentDateAtom);\n    const currentTimeField = useAtomValue(currentTimeFieldAtom);\n    const [currentIndex, setCurrentIndex] = useAtom(currentIndexAtom);\n    const searchFocus = useAtomValue(searchFocusAtom);\n    const [selectedDatasource, setSelectedDatasource] = useAtom(selectedDatasourceAtom);\n    const [timeRange, setTimeRange] = useAtom(timeRangeAtom);\n    const [currentTable, setCurrentTable] = useAtom(currentTraceTableAtom);\n    const [databases, setDatabases] = useAtom(databasesAtom);\n    const [tables, setTables] = useAtom(tablesAtom);\n    const [_datasources, setDataSource] = useAtom(datasourcesAtom);\n    const setDisabledOptions = useSetAtom(disabledOptionsAtom);\n\n    const selectdbDS = useAtomValue(selectedDatasourceAtom);\n\n    useEffect(() => {\n        const datasources = getDataSourceSrv().getList();\n        setDataSource(datasources);\n    }, [setDataSource]);\n\n    useEffect(() => {\n        if (currentIndex.length > 0) {\n            setDisabledOptions([]);\n        } else {\n            setDisabledOptions(['Search']);\n        }\n    }, [currentIndex, setDisabledOptions]);\n\n    const theme = useTheme2();\n\n    useEffect(() => {\n        if (!selectdbDS) {\n            return;\n        }\n\n        const subscription: Subscription = getDatabases(selectdbDS).subscribe({\n            next: (resp: any) => {\n                const { data, ok } = resp;\n                if (ok) {\n                    const frame = toDataFrame(data.results.getDatabases.frames[0]);\n                    const values = Array.from(frame.fields[0].values);\n                    const options = values.map((item: string) => ({ label: item, value: item }));\n                    setDatabases(options);\n                }\n            },\n            error: (err: any) => console.log('Fetch Error', err),\n        });\n\n        return () => subscription.unsubscribe();\n    }, [selectdbDS, setDatabases]);\n\n    function getFields(selectedTable: any) {\n        getFieldsService({\n            selectdbDS,\n            database: discoverCurrent.database,\n            table: selectedTable.value,\n        }).subscribe({\n            next: ({ data, ok }: any) => {\n                if (ok) {\n                    const frame = toDataFrame(data.results.getFields.frames[0]);\n                    console.log('frame', frame);\n                    const values = Array.from(frame.fields[0].values);\n                    const fieldTypes = Array.from(frame.fields[1].values);\n\n                    const tableFields = values.map((item: any, index: number) => {\n                        return {\n                            label: item,\n                            Field: item,\n                            value: item,\n                            Type: fieldTypes[index],\n                        };\n                    });\n\n                    setTableFields(tableFields);\n\n                    if (values) {\n                        const options = values\n                            .filter((field: any, index: number) => {\n                                return isValidTimeFieldType(fieldTypes[index].toUpperCase());\n                            })\n                            .map((item: any) => {\n                                return {\n                                    label: item,\n                                    value: item,\n                                };\n                            });\n                        setDiscoverCurrent({\n                            ...discoverCurrent,\n                            timeField: options[0]?.value || '',\n                        });\n                        setTimeFields(options);\n                    }\n                }\n            },\n            error: (err: any) => {\n                console.log('Fetch Error', err);\n            },\n        });\n    }\n\n    function getIndexes(selectedTable: any) {\n        getIndexesService({\n            selectdbDS,\n            database: discoverCurrent.database,\n            table: selectedTable.value,\n        }).subscribe({\n            next: ({ data, ok }: any) => {\n                if (ok) {\n                    const frame = toDataFrame(data.results.getIndexes.frames[0]);\n                    const values = Array.from(frame.fields[2].values);\n                    const columnNames = Array.from(frame.fields[4].values);\n                    const indexesTypes = Array.from(frame.fields[10].values);\n\n                    if (!values || values.length === 0) {\n                        setIndexes([]);\n                        setCurrentIndex([]);\n                        return;\n                    }\n\n                    const tableIndexes = values?.map((item: any, index: number) => {\n                        return {\n                            label: item,\n                            value: item,\n                            type: indexesTypes[index],\n                            columnName: columnNames[index],\n                        };\n                    });\n\n                    setIndexes(tableIndexes);\n\n                    if (tableIndexes) {\n                        setCurrentIndex(tableIndexes);\n                    }\n                }\n            },\n            error: (err: any) => {\n                console.log('Fetch Error', err);\n            },\n        });\n    }\n\n    return (\n        <div\n            className={css`\n                padding: 1rem;\n                padding-top: 1.5rem;\n                background-color: ${theme.isDark ? 'rgb(24, 27, 31)' : '#FFF'};\n                display: flex;\n                border-radius: 0.25rem 0.25rem 0 0;\n                border-bottom: 1px solid ${theme.colors.border.medium};\n            `}\n        >\n            <DiscoverHeaderSearch>\n                <Field label=\"Datasource\">\n                    {/* filter 这个版本无效 */}\n                    <DataSourcePicker\n                        width={20}\n                        type={'mysql'}\n                        current={selectedDatasource}\n                        placeholder=\"Choose\"\n                        noDefault\n                        filter={ds => ds.type === 'mysql'}\n                        onChange={item => {\n                            console.log('item', item);\n                            setSelectedDatasource(item);\n                        }}\n                    />\n                </Field>\n                {/* 需要从数据源中获取库表信息 */}\n                <Field label=\"Database\" style={{ marginLeft: 8 }}>\n                    <Select\n                        width={15}\n                        options={databases}\n                        value={discoverCurrent.database}\n                        onChange={(selectedDatabase: any) => {\n                            setDiscoverCurrent({\n                                ...discoverCurrent,\n                                database: selectedDatabase.value,\n                            });\n                            getTablesService({\n                                selectdbDS,\n                                database: selectedDatabase.value,\n                            }).subscribe({\n                                next: (resp: any) => {\n                                    const { data, ok } = resp;\n                                    if (ok) {\n                                        const frame = toDataFrame(data.results.getTables.frames[0]);\n                                        const values = Array.from(frame.fields[0].values);\n                                        const options = values.map((item: string) => ({ label: item, value: item }));\n                                        setTables(options);\n                                    }\n                                },\n                                error: (err: any) => console.log('Fetch Error', err),\n                            });\n                        }}\n                    ></Select>\n                </Field>\n\n                <Field label=\"Table\" style={{ marginLeft: 8 }}>\n                    <Select\n                        options={tables}\n                        width={15}\n                        value={currentTable}\n                        onChange={(selectedTable: any) => {\n                            setDiscoverCurrent({\n                                ...discoverCurrent,\n                                table: selectedTable.value,\n                            });\n                            setCurrentTable(selectedTable.value);\n                            getFields(selectedTable);\n                            getIndexes(selectedTable);\n                        }}\n                    />\n                </Field>\n            </DiscoverHeaderSearch>\n            {!searchFocus && (\n                <>\n                    <Field label=\"Time Field\">\n                        <Select\n                            value={currentTimeField}\n                            options={timeFields}\n                            onChange={(selectdbTimeFiled: any) => {\n                                setDiscoverCurrent({\n                                    ...discoverCurrent,\n                                    timeField: selectdbTimeFiled.value,\n                                });\n                                setLoc((prev: any) => {\n                                    const searchParams = prev.searchParams;\n                                    searchParams?.set('timeField', selectdbTimeFiled.value);\n                                    return {\n                                        ...prev,\n                                        searchParams,\n                                    };\n                                });\n                            }}\n                            placeholder={'Time Field'}\n                        />\n                    </Field>\n                    <Field label=\"Time Range\" style={{ marginLeft: 8, marginRight: 8 }}>\n                        <TimeRangeInput\n                            isReversed={false}\n                            onChange={timeRange => {\n                                const start = dayjs(timeRange.from.toDate());\n                                const end = dayjs(timeRange.to.toDate());\n                                setLoc(prev => {\n                                    const searchParams = prev.searchParams;\n                                    searchParams?.set('startTime', start.format(FORMAT_DATE));\n                                    searchParams?.set('endTime', end.format(FORMAT_DATE));\n                                    return {\n                                        ...prev,\n                                        searchParams,\n                                    };\n                                });\n                                setCurrentDate([start, end]);\n                                setTimeRange(timeRange);\n                            }}\n                            value={timeRange}\n                        />\n                    </Field>\n                </>\n            )}\n        </div>\n    );\n}\n","import React, { useEffect } from 'react';\nimport { SearchSidebar } from 'components/traces/search-sidebar';\nimport { TraceView } from 'components/traces/traces-viewer';\nimport { css } from '@emotion/css';\nimport { LoadingBar, useTheme2 } from '@grafana/ui';\nimport { currentCatalogAtom, currentDatabaseAtom, currentDateAtom, currentTimeFieldAtom, pageAtom, pageSizeAtom, selectedDatasourceAtom } from 'store/discover';\nimport { useAtom, useAtomValue, useSetAtom } from 'jotai';\nimport TracesHeader from 'components/traces/traces-header';\nimport { DEFAULT_OPERATION, DEFAULT_SERVICE, FORMAT_DATE } from '../constants';\nimport { Dayjs } from 'dayjs';\nimport {\n    currentOperationAtom,\n    currentServiceAtom,\n    currentSortAtom,\n    currentTraceTableAtom,\n    maxDurationAtom,\n    minDurationAtom,\n    tagsAtom,\n    traceOperationsAtom,\n    tracesAtom,\n    tracesServicesAtom,\n} from 'store/traces';\nimport { convertColumnToRow } from 'utils/data';\nimport { PluginPage } from '@grafana/runtime';\nimport { getOperationListService, getServiceListService, getTracesService } from 'services/traces';\nimport { toDataFrame } from '@grafana/data';\n\nexport default function PageTrace() {\n    const theme = useTheme2();\n    const currentTimeField = useAtomValue(currentTimeFieldAtom);\n    const currentTable = useAtomValue(currentTraceTableAtom);\n    const currentCatalog = useAtomValue(currentCatalogAtom);\n    const currentDatabase = useAtomValue(currentDatabaseAtom);\n    const currentDate = useAtomValue(currentDateAtom);\n    const selectdbDS = useAtomValue(selectedDatasourceAtom);\n    const [page, setPage] = useAtom(pageAtom);\n    const pageSize = useAtomValue(pageSizeAtom);\n    const [traces, setTraces] = useAtom(tracesAtom);\n    const setTracesServices = useSetAtom(tracesServicesAtom);\n    const setTraceOperations = useSetAtom(traceOperationsAtom);\n    const [loading, setLoading] = React.useState(false);\n    const currentService = useAtomValue(currentServiceAtom);\n    const currentOperation = useAtomValue(currentOperationAtom);\n    const tags = useAtomValue(tagsAtom);\n    const minDuration = useAtomValue(minDurationAtom);\n    const maxDuration = useAtomValue(maxDurationAtom);\n    const sort = useAtomValue(currentSortAtom);\n\n    const getTraces = React.useCallback(() => {\n        if (!currentTable || !currentDatabase || !selectdbDS) {\n            return;\n        }\n        setLoading(true);\n        const payload: any = {\n            catalog: currentCatalog,\n            database: currentDatabase,\n            table: currentTable,\n            timeField: currentTimeField,\n            startDate: currentDate[0]?.format(FORMAT_DATE),\n            endDate: (currentDate[1] as Dayjs).format(FORMAT_DATE),\n            cluster: '',\n            page: page,\n            page_size: pageSize,\n            service_name: currentService.value,\n            operation: currentOperation.value,\n            sortBy: sort, // 'most-recent' | 'longest-duration'\n        };\n\n        if (minDuration) {\n            console.log('minDuration', minDuration);\n            payload.minDuration = minDuration;\n        }\n        if (maxDuration) {\n            console.log('maxDuration', maxDuration);\n            payload.maxDuration = maxDuration;\n        }\n        if (tags && tags.length > 0) {\n            payload.tags = tags;\n        }\n\n        getTracesService({\n            selectdbDS,\n            ...payload,\n        }).subscribe({\n            next: ({ data, ok }: any) => {\n                setLoading(false);\n                if (ok) {\n                    const rowsData = convertColumnToRow(data.results.getTraces.frames[0]);\n                    // console.log('查询结果', rowsData);\n                    const formateData = rowsData.map((item: any) => {\n                        return {\n                            ...item,\n                            trace_duration_ms: (item.trace_duration_ms as number)?.toFixed(2) || 0,\n                        };\n                    });\n                    setTraces(formateData);\n                }\n            },\n            error: (err: any) => {\n                setLoading(false);\n                console.log('Fetch Error', err);\n            },\n        });\n    }, [\n        currentCatalog,\n        currentDatabase,\n        currentTable,\n        currentTimeField,\n        currentDate,\n        page,\n        pageSize,\n        currentService.value,\n        currentOperation.value,\n        sort,\n        minDuration,\n        maxDuration,\n        tags,\n        selectdbDS,\n        setTraces,\n    ]);\n\n    const getTracesServices = React.useCallback(() => {\n        if (!currentTable || !currentDatabase || !selectdbDS) {\n            return;\n        }\n        let payload: any = {\n            catalog: currentCatalog,\n            database: currentDatabase,\n            table: currentTable,\n            timeField: currentTimeField,\n            startDate: currentDate[0]?.format(FORMAT_DATE),\n            endDate: (currentDate[1] as Dayjs).format(FORMAT_DATE),\n            cluster: '',\n        };\n\n        getServiceListService({\n            selectdbDS,\n            ...payload,\n        }).subscribe({\n            next: ({ data, ok }: any) => {\n                setLoading(false);\n                if (ok) {\n                    const frame = toDataFrame(data.results.getServiceList.frames[0]);\n                    const values = Array.from(frame.fields[0].values);\n\n                    if (values) {\n                        const options = values.map((item: any) => {\n                            return {\n                                label: item,\n                                value: item,\n                            };\n                        });\n                        setTracesServices([DEFAULT_SERVICE, ...options]);\n                    }\n                }\n            },\n            error: (err: any) => {\n                setLoading(false);\n                console.log('Fetch Error', err);\n            },\n        });\n    }, [currentCatalog, currentDatabase, currentDate, currentTable, currentTimeField, selectdbDS, setTracesServices]);\n\n    const getTracesOperations = React.useCallback(() => {\n        let payload: any = {\n            catalog: currentCatalog,\n            database: currentDatabase,\n            table: currentTable,\n            timeField: currentTimeField,\n            startDate: currentDate[0]?.format(FORMAT_DATE),\n            endDate: (currentDate[1] as Dayjs).format(FORMAT_DATE),\n            service_name: currentService.value,\n            cluster: '',\n        };\n\n        getOperationListService({\n            selectdbDS,\n            ...payload,\n        }).subscribe({\n            next: ({ data, ok }: any) => {\n                setLoading(false);\n                if (ok) {\n                    // const frame = toDataFrame(data.results.getOperationList.frames[0]);\n                    // const values = Array.from(frame.fields[0].values);\n                    // const values = frame.data.values\n                    const values = data.results.getOperationList.frames[0].data.values[0];\n\n                    if (values) {\n                        const options = values.map((item: any) => {\n                            return {\n                                label: item,\n                                value: item,\n                            };\n                        });\n                        setTraceOperations([DEFAULT_OPERATION, ...options]);\n                    } else {\n                        setTraceOperations([DEFAULT_OPERATION]);\n                    }\n                }\n            },\n            error: (err: any) => {\n                setLoading(false);\n                console.log('Fetch Error', err);\n            },\n        });\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [currentCatalog, currentDatabase, currentDate, currentService, currentTable, currentTimeField, selectdbDS, setTraceOperations]);\n\n    useEffect(() => {\n        if (currentTimeField && currentTable && currentCatalog && currentDatabase && currentDate) {\n            getTraces();\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [page, pageSize, currentTimeField, currentDate, sort]);\n\n    useEffect(() => {\n        if (currentTimeField && currentTable && currentCatalog && currentDatabase && currentDate) {\n            getTracesServices();\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [currentTimeField, currentDate, sort]);\n\n    useEffect(() => {\n        if (currentTimeField && currentTable && currentCatalog && currentDatabase && currentService) {\n            getTracesOperations();\n        }\n    }, [currentTimeField, currentService, getTracesOperations, currentTable, currentCatalog, currentDatabase]);\n\n    return (\n        <div\n            className={css`\n                height: 100%;\n                width: 100%;\n                overflow: hidden;\n                & > div {\n                    height: 100%;\n                }\n                & > div > div {\n                    padding: 0 1rem;\n                    height: 100%;\n                }\n            `}\n        >\n            <PluginPage pageNav={{ text: '' }}>\n                <TracesHeader />\n                <div\n                    className={css`\n                        display: flex;\n                        height: calc(100% - 103px);\n                        width: 100%;\n                        overflow: hidden;\n                        background-color: ${theme.colors.background.primary};\n                        color: ${theme.colors.text.primary};\n                    `}\n                >\n                    <aside\n                        className={css`\n                            width: 320px;\n                            flex-shrink: 0;\n                            border-right: 1px solid ${theme.colors.border.medium};\n                            padding: 16px;\n                        `}\n                    >\n                        <SearchSidebar\n                            onQuerying={() => {\n                                setPage(1);\n                                getTraces();\n                            }}\n                        />\n                    </aside>\n\n                    {/* 右侧主内容区 */}\n                    <main\n                        className={css`\n                            flex: 1;\n                            height: 100%;\n                            padding: 24px;\n                            overflow-y: auto;\n                        `}\n                    >\n                        {loading && <LoadingBar width={100} />}\n                        <TraceView traces={traces} />\n                    </main>\n                </div>\n            </PluginPage>\n        </div>\n    );\n}\n","import { QueryTracesParams, TracesOperationsParams, TracesServicesParams } from 'types/type';\n\ninterface QueryTraceDetailParams {\n    database: string;\n    table: string;\n    trace_id: string;\n}\n\n// 查询某个Table的Trace详情\nexport function getQueryTableTraceSQL(params: QueryTraceDetailParams): string {\n    const { table, trace_id, database } = params;\n\n    const sql = `\n      SELECT\n        trace_id AS traceID,\n        span_id AS spanID,\n        parent_span_id AS parentSpanID,\n        span_name AS operationName,\n        service_name AS serviceName,\n        CONCAT(\n          '[',\n          array_join(\n            array_map(\n              (x, y) -> json_object('key', x, 'value', y),\n              map_keys(CAST(CAST(resource_attributes AS TEXT) AS MAP<STRING, STRING>)),\n              map_values(CAST(CAST(resource_attributes AS TEXT) AS MAP<STRING, STRING>))\n            ),\n            ','\n          ),\n          ']'\n        ) AS serviceTags,\n        UNIX_TIMESTAMP(timestamp) * 1000 AS startTime,\n        duration / 1000 AS duration,\n        CONCAT(\n          '[',\n          array_join(\n            array_map(\n              (x, y) -> json_object('key', x, 'value', y),\n              map_keys(CAST(CAST(span_attributes AS TEXT) AS MAP<STRING, STRING>)),\n              map_values(CAST(CAST(span_attributes AS TEXT) AS MAP<STRING, STRING>))\n            ),\n            ','\n          ),\n          ']'\n        ) AS tags,\n        span_kind AS kind,\n        CASE status_code\n          WHEN 'STATUS_CODE_OK' THEN 1\n          WHEN 'STATUS_CODE_ERROR' THEN 2\n          ELSE 0\n        END AS statusCode,\n        status_message AS statusMessage,\n        scope_name AS instrumentationLibraryName,\n        scope_version AS instrumentationLibraryVersion,\n        trace_state AS traceState\n      FROM ${database}.\\`${table}\\`\n      WHERE trace_id = '${trace_id}';\n    `;\n\n    return sql;\n}\n\nfunction parseDuration(input?: string): number {\n    if (!input) {\n        return 0;\n    }\n\n    if (input.endsWith('ms')) {\n        return parseFloat(input.replace('ms', ''));\n    } else if (input.endsWith('us')) {\n        return parseFloat(input.replace('us', '')) / 1000;\n    } else if (input.endsWith('s')) {\n        return parseFloat(input.replace('s', '')) * 1000;\n    }\n    return 0;\n}\n\nfunction tagsToDorisSQLConditions(tags?: string): string {\n    if (!tags) {\n        return '1=1';\n    }\n    const conditions: string[] = [];\n\n    const regex = /([\\w.]+)=(?:\"([^\"]+)\"|'([^']+)'|([^\\s]+))/g;\n    let match: RegExpExecArray | null;\n    while ((match = regex.exec(tags)) !== null) {\n        const key = match[1];\n        const val = match[2] || match[3] || match[4];\n        conditions.push(`span_attributes['${key}'] = '${val}'`);\n    }\n\n    return conditions.length > 0 ? conditions.join(' AND ') : '1=1';\n}\n\nexport function buildTraceAggSQLFromParams(params: QueryTracesParams): string {\n    const timeFilter = `${params.timeField} >= '${params.startDate}' AND ${params.timeField} < '${params.endDate}'`;\n\n    const serviceFilter = params.service_name && params.service_name !== 'all' ? `service_name = '${params.service_name}'` : '1=1';\n\n    const operationFilter = params.operation && params.operation !== 'all' ? `span_name = '${params.operation}'` : '1=1';\n\n    const statusFilter = params.statusCode && params.statusCode !== 'all' ? `status_code = '${params.statusCode}'` : '1=1';\n\n    const minDuration = parseDuration(params.minDuration);\n    const maxDuration = parseDuration(params.maxDuration);\n\n    let durationFilter = '1=1';\n    if (minDuration > 0 && maxDuration > 0) {\n        durationFilter = `trace_duration BETWEEN ${minDuration} AND ${maxDuration}`;\n    } else if (minDuration > 0) {\n        durationFilter = `trace_duration >= ${minDuration}`;\n    } else if (maxDuration > 0) {\n        durationFilter = `trace_duration <= ${maxDuration}`;\n    }\n\n    const tagsFilter = tagsToDorisSQLConditions(params.tags);\n\n    let rootSpansFilter = '1=1';\n    if (params.service_name && params.service_name !== 'all') {\n        rootSpansFilter = `service_name = '${params.service_name}'`;\n    }\n    if (params.operation && params.operation !== 'all') {\n        rootSpansFilter += ` AND span_name = '${params.operation}'`;\n    }\n\n    const limit = params.page_size ?? 1000;\n    const offset = Math.max(((params.page ?? 1) - 1) * limit, 0);\n\n    let rowNumberOrderBy = 'time DESC';\n    switch (params.sortBy) {\n        case 'longest-duration':\n            rowNumberOrderBy = 'trace_duration_ms DESC';\n            break;\n        case 'shortest-duration':\n            rowNumberOrderBy = 'trace_duration_ms ASC';\n            break;\n        case 'most-spans':\n            rowNumberOrderBy = 'spans DESC';\n            break;\n        case 'least-spans':\n            rowNumberOrderBy = 'spans ASC';\n            break;\n        case 'most-recent':\n            rowNumberOrderBy = 'time DESC';\n            break;\n    }\n\n    const query = `\nUSE ${params.database};\n\nWITH\n  trace_durations AS (\n    SELECT\n      trace_id,\n      (UNIX_TIMESTAMP(MAX(end_time)) - UNIX_TIMESTAMP(MIN(timestamp))) * 1000 AS trace_duration\n    FROM ${params.table}\n    WHERE ${timeFilter}\n    GROUP BY trace_id\n  ),\n  all_trace_ids AS (\n    SELECT\n      t.trace_id,\n      MIN(t.${params.timeField}) AS time,\n      d.trace_duration\n    FROM ${params.table} t\n    JOIN trace_durations d ON t.trace_id = d.trace_id\n    WHERE\n      ${timeFilter}\n      AND ${serviceFilter}\n      AND ${operationFilter}\n      AND ${statusFilter}\n      AND ${tagsFilter}\n      AND 1=1\n      AND ${durationFilter}\n    GROUP BY t.trace_id, d.trace_duration\n  ),\n  root_spans AS (\n    SELECT\n      trace_id,\n      span_name AS operation,\n      service_name AS root_service\n    FROM ${params.table}\n    WHERE (parent_span_id IS NULL OR parent_span_id = '') AND ${rootSpansFilter} AND ${timeFilter}\n  ),\n  aggregated AS (\n    SELECT\n      UNIX_TIMESTAMP(MIN(t.${params.timeField})) AS time,\n      t.trace_id,\n      r.operation,\n      r.root_service,\n      COLLECT_SET(t.service_name) AS services,\n      COUNT(*) AS spans,\n      SUM(IF(status_code = 'STATUS_CODE_ERROR', 1, 0)) AS error_spans,\n      MAX(duration) / 1000 AS max_span_duration_ms,\n      MAX(UNIX_TIMESTAMP(t.timestamp) * 1000 + duration / 1000) - MIN(UNIX_TIMESTAMP(t.timestamp) * 1000) AS trace_duration_ms,\n      MAX(IF(t.parent_span_id IS NULL OR t.parent_span_id = '', duration, 0)) / 1000 AS root_span_duration_ms\n    FROM ${params.table} t\n    JOIN all_trace_ids a ON t.trace_id = a.trace_id\n    JOIN root_spans r ON t.trace_id = r.trace_id\n    GROUP BY t.trace_id, r.operation, r.root_service\n  ),\n  numbered AS (\n    SELECT\n      a.*,\n      COUNT(*) OVER() AS total_count,\n      ROW_NUMBER() OVER(ORDER BY ${rowNumberOrderBy}) AS rn\n    FROM aggregated a\n  )\n\nSELECT\n  *,\n  total_count AS total\nFROM numbered\nWHERE rn > ${offset} AND rn <= ${offset + limit}\nORDER BY ${rowNumberOrderBy};\n`;\n\n    return query;\n}\n\nexport function getServiceListSQL(params: TracesServicesParams): string {\n    return `\n    SELECT DISTINCT service_name \n    FROM ${params.table} \n    WHERE ${params.timeField} BETWEEN '${params.startDate}' AND '${params.endDate}' \n    ORDER BY service_name ASC\n  `;\n}\n\nexport function getOperationListSQL(params: TracesOperationsParams): string {\n    return `\n    SELECT DISTINCT span_name \n    FROM ${params.table} \n    WHERE ${params.timeField} BETWEEN '${params.startDate}' AND '${params.endDate}' \n    AND service_name = '${params.service_name}'\n    ORDER BY span_name ASC\n  `;\n}\n","import { getBackendSrv } from \"@grafana/runtime\";\nimport { buildTraceAggSQLFromParams, getOperationListSQL, getQueryTableTraceSQL, getServiceListSQL } from \"./traces.sql\";\n\n// 获取table的Trace数据\nexport function getTableDataTraceService(payload: any) {\n    const { selectdbDS, ...rest } = payload;\n    const traceSQL = getQueryTableTraceSQL(rest);\n    return getBackendSrv().fetch({\n        url: '/api/ds/query',\n        method: 'POST',\n        data: {\n            queries: [\n                {\n                    refId: 'getTableDataTrace',\n                    datasource: {\n                        type: 'mysql',\n                        uid: selectdbDS.uid,\n                    },\n                    rawSql: traceSQL,\n                    format: 'table',\n                },\n            ],\n        },\n        credentials: 'include',\n    });\n}\n\n// 查询Traces\nexport function getTracesService(payload: any) {\n    const { selectdbDS, ...rest } = payload;\n    const getTracesSQL = buildTraceAggSQLFromParams(rest);\n    return getBackendSrv().fetch({\n        url: '/api/ds/query',\n        method: 'POST',\n        data: {\n            queries: [\n                {\n                    refId: 'getTraces',\n                    datasource: {\n                        type: 'mysql',\n                        uid: selectdbDS.uid,\n                    },\n                    rawSql: getTracesSQL,\n                    format: 'table',\n                },\n            ],\n        },\n        credentials: 'include',\n    });\n}\n\n// 查询Trace Services\nexport function getServiceListService(payload: any) {\n    const { selectdbDS, ...rest } = payload;\n    const serviceListSQL = getServiceListSQL(rest);\n    return getBackendSrv().fetch({\n        url: '/api/ds/query',\n        method: 'POST',\n        data: {\n            queries: [\n                {\n                    refId: 'getServiceList',\n                    datasource: {\n                        type: 'mysql',\n                        uid: selectdbDS.uid,\n                    },\n                    rawSql: serviceListSQL,\n                    format: 'table',\n                },\n            ],\n        },\n        credentials: 'include',\n    });\n}\n\n// 查询Trace Operations\nexport function getOperationListService(payload: any) {\n    const { selectdbDS, ...rest } = payload;\n    const operationListSQL = getOperationListSQL(rest);\n    return getBackendSrv().fetch({\n        url: '/api/ds/query',\n        method: 'POST',\n        data: {\n            queries: [\n                {\n                    refId: 'getOperationList',\n                    datasource: {\n                        type: 'mysql',\n                        uid: selectdbDS.uid,\n                    },\n                    rawSql: operationListSQL,\n                    format: 'table',\n                },\n            ],\n        },\n        credentials: 'include',\n    });\n}\n\n\n\n","import { DEFAULT_OPERATION, DEFAULT_SERVICE } from '../constants';\nimport { atom } from 'jotai';\n\n\nexport const currentTraceTableAtom = atom<string>('');\nexport const currentServiceAtom = atom<any>(DEFAULT_SERVICE);\nexport const currentOperationAtom = atom<any>(DEFAULT_OPERATION);\nexport const currentSortAtom = atom<any>('most-recent');\nexport const tagsAtom = atom<string>('');\nexport const tracesAtom = atom<any>([]);\nexport const tracesServicesAtom = atom<any>([]);\nexport const traceOperationsAtom = atom<any>([]);\nexport const minDurationAtom = atom<any>('');\nexport const maxDurationAtom = atom<any>('');\n"],"names":["LoadingState","PanelRenderer","Drawer","LoadingPlaceholder","useAtom","useAtomValue","React","useEffect","getTableDataTraceService","currentCatalogAtom","currentDatabaseAtom","tableTracesDataAtom","selectedDatasourceAtom","selectedRowAtom","currentTraceTableAtom","formatTracesResData","TraceDetail","props","currentTable","currentCatalog","currentDatabase","traceData","setTraceData","selectedRow","selectdbDS","traceTable","loading","setLoading","useState","open","traceId","getTraceData","useCallback","payload","catalog","database","table","cluster","sort","trace_id","subscribe","next","data","ok","formatedData","results","getTableDataTrace","frames","error","err","console","log","renderTracePanel","title","width","height","pluginId","options","state","Loading","Done","series","timeRange","from","Date","now","to","raw","onClose","size","text","HelpCircle","Button","Field","Input","Select","Tooltip","currentOperationAtom","currentServiceAtom","maxDurationAtom","minDurationAtom","tagsAtom","traceOperationsAtom","tracesServicesAtom","css","currentTimeFieldAtom","trimSpacesAroundEquals","SearchSidebar","tracesServices","traceOperations","currentService","setCurrentService","currentOperation","setCurrentOperation","tags","setTags","currentTimeField","minDuration","setMinDuration","maxDuration","setMaxDuration","value","label","div","className","style","marginLeft","onChange","selectedService","selectedOperation","span","a","href","target","br","ul","li","id","placeholder","e","onMinDurationChange","onMaxDurationChange","onClick","onQuerying","useTheme2","TraceItem","trace","theme","colors","background","primary","border","weak","shape","borderRadius","spacing","shadows","z1","progress","main","typography","fontWeightMedium","root_service","operation","secondary","trace_duration_ms","sm","spans","JSON","parse","services","map","service","index","key","xs","time","disabled","timeAgo","useMemo","Pagination","ReactECharts","pageAtom","pageSizeAtom","currentSortAtom","TraceView","memo","traces","propTraces","onSortByChange","page","setPage","pageSize","total","setSort","drawerOpen","setDrawerOpen","setTraceId","seriesData","s","name","symbolSize","Math","max","min","option","tooltip","trigger","padding","borderWidth","backgroundColor","isLight","formatter","params","html","xAxis","type","axisLabel","color","yAxis","axisLine","lineStyle","onEvents","click","notMerge","lazyUpdate","h3","length","currentPage","numberOfPages","ceil","onNavigate","toPage","styled","DiscoverHeaderSearch","DiscoverHeaderTimeSelect","CascaderStyle","dayjs","useSetAtom","DataSourcePicker","getDataSourceSrv","indexesAtom","discoverCurrentAtom","locationAtom","tableFieldsAtom","timeFieldsAtom","currentDateAtom","currentIndexAtom","searchFocusAtom","datasourcesAtom","timeRangeAtom","databasesAtom","tablesAtom","disabledOptionsAtom","isValidTimeFieldType","TimeRangeInput","FORMAT_DATE","getDatabases","getFieldsService","getIndexesService","getTablesService","toDataFrame","TracesHeader","setIndexes","discoverCurrent","setDiscoverCurrent","process","env","NODE_ENV","debugLabel","setLoc","setTableFields","timeFields","setTimeFields","_currentDate","setCurrentDate","currentIndex","setCurrentIndex","searchFocus","selectedDatasource","setSelectedDatasource","setTimeRange","setCurrentTable","databases","setDatabases","tables","setTables","_datasources","setDataSource","setDisabledOptions","datasources","getList","subscription","resp","frame","values","Array","fields","item","unsubscribe","getFields","selectedTable","fieldTypes","tableFields","Type","filter","field","toUpperCase","timeField","getIndexes","columnNames","indexesTypes","tableIndexes","columnName","isDark","medium","current","noDefault","ds","selectedDatabase","getTables","selectdbTimeFiled","prev","searchParams","set","marginRight","isReversed","start","toDate","end","format","LoadingBar","DEFAULT_OPERATION","DEFAULT_SERVICE","tracesAtom","convertColumnToRow","PluginPage","getOperationListService","getServiceListService","getTracesService","PageTrace","currentDate","setTraces","setTracesServices","setTraceOperations","getTraces","startDate","endDate","page_size","service_name","sortBy","rowsData","formateData","toFixed","getTracesServices","getServiceList","getTracesOperations","getOperationList","pageNav","aside","getQueryTableTraceSQL","sql","parseDuration","input","endsWith","parseFloat","replace","tagsToDorisSQLConditions","conditions","regex","match","exec","val","push","join","buildTraceAggSQLFromParams","timeFilter","serviceFilter","operationFilter","statusFilter","statusCode","durationFilter","tagsFilter","rootSpansFilter","limit","offset","rowNumberOrderBy","query","getServiceListSQL","getOperationListSQL","getBackendSrv","rest","traceSQL","fetch","url","method","queries","refId","datasource","uid","rawSql","credentials","getTracesSQL","serviceListSQL","operationListSQL","atom"],"sourceRoot":""}